import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.Scanner;


public class Tic_Tac_Teo_Tomek {

	public static void main(String[] args) throws IOException {
		
		//read input from file ...
		File file = new File("C:/Users/Gopi/Desktop/code jam/Tic_Tac_Teo_Tomek/src/input.txt");  
		FileReader fr = new FileReader(file);  
		BufferedReader br = new BufferedReader(fr);                                                   
		String data,input=""; 
		while((	data = br.readLine()) != null)   
		{  
			input=input+data+"\n";
		}                                 
		
		Scanner in= new Scanner(input);
		int count = Integer.parseInt(in.next());
		//System.out.println(count);
		String row,result;
		char a[][]= new char[4][4];
		for(int i=0;i<count;i++){
			for(int j=0;j<4;j++){
				row=in.next();
				//System.out.println(row);
				for(int k=0;k<4;k++){
					a[j][k]=row.charAt(k);
//					System.out.println(a[j][k]);
				}
			}
			
			if(		(a[0][0]=='X' & a[0][1]=='X'& a[0][2]=='X'&a[0][3]=='X') ||
					(a[1][0]=='X' & a[1][1]=='X'& a[1][2]=='X'&a[1][3]=='X') ||
					(a[2][0]=='X' & a[2][1]=='X'& a[2][2]=='X'&a[2][3]=='X') ||
					(a[3][0]=='X' & a[3][1]=='X'& a[3][2]=='X'&a[3][3]=='X') ||
					
					(a[0][0]=='X' & a[1][0]=='X'& a[2][0]=='X'&a[3][0]=='X') ||
					(a[0][1]=='X' & a[1][1]=='X'& a[2][1]=='X'&a[3][1]=='X') ||
					(a[0][2]=='X' & a[1][2]=='X'& a[2][2]=='X'&a[3][2]=='X') ||
					(a[0][3]=='X' & a[1][3]=='X'& a[2][3]=='X'&a[3][3]=='X') ||
					
					(a[0][0]=='X' & a[1][1]=='X'& a[2][2]=='X'&a[3][3]=='X') ||
					(a[0][3]=='X' & a[1][2]=='X'& a[2][1]=='X'&a[3][0]=='X') ||
					
					(a[0][0]=='X' & a[0][1]=='X'& a[0][2]=='X'&a[0][3]=='T') ||
					(a[1][0]=='X' & a[1][1]=='X'& a[1][2]=='X'&a[1][3]=='T') ||
					(a[2][0]=='X' & a[2][1]=='X'& a[2][2]=='X'&a[2][3]=='T') ||
					(a[3][0]=='X' & a[3][1]=='X'& a[3][2]=='X'&a[3][3]=='T') ||
					
					(a[0][0]=='X' & a[1][0]=='X'& a[2][0]=='X'&a[3][0]=='T') ||
					(a[0][1]=='X' & a[1][1]=='X'& a[2][1]=='X'&a[3][1]=='T') ||
					(a[0][2]=='X' & a[1][2]=='X'& a[2][2]=='X'&a[3][2]=='T') ||
					(a[0][3]=='X' & a[1][3]=='X'& a[2][3]=='X'&a[3][3]=='T') ||
					
					(a[0][0]=='X' & a[1][1]=='X'& a[2][2]=='X'&a[3][3]=='T') ||
					(a[0][3]=='X' & a[1][2]=='X'& a[2][1]=='X'&a[3][0]=='T') ||
					
					(a[0][0]=='X' & a[0][1]=='X'& a[0][2]=='T'&a[0][3]=='X') ||
					(a[1][0]=='X' & a[1][1]=='X'& a[1][2]=='T'&a[1][3]=='X') ||
					(a[2][0]=='X' & a[2][1]=='X'& a[2][2]=='T'&a[2][3]=='X') ||
					(a[3][0]=='X' & a[3][1]=='X'& a[3][2]=='T'&a[3][3]=='X') ||
				
					(a[0][0]=='X' & a[1][0]=='X'& a[2][0]=='T'&a[3][0]=='X') ||
					(a[0][1]=='X' & a[1][1]=='X'& a[2][1]=='T'&a[3][1]=='X') ||
					(a[0][2]=='X' & a[1][2]=='X'& a[2][2]=='T'&a[3][2]=='X') ||
					(a[0][3]=='X' & a[1][3]=='X'& a[2][3]=='T'&a[3][3]=='X') ||
					
					(a[0][0]=='X' & a[1][1]=='X'& a[2][2]=='T'&a[3][3]=='X') ||
					(a[0][3]=='X' & a[1][2]=='X'& a[2][1]=='T'&a[3][0]=='X') ||
					
					(a[0][0]=='X' & a[0][1]=='T'& a[0][2]=='X'&a[0][3]=='X') ||
					(a[1][0]=='X' & a[1][1]=='T'& a[1][2]=='X'&a[1][3]=='X') ||
					(a[2][0]=='X' & a[2][1]=='T'& a[2][2]=='X'&a[2][3]=='X') ||
					(a[3][0]=='X' & a[3][1]=='T'& a[3][2]=='X'&a[3][3]=='X') ||
					
					(a[0][0]=='X' & a[1][0]=='T'& a[2][0]=='X'&a[3][0]=='X') ||
					(a[0][1]=='X' & a[1][1]=='T'& a[2][1]=='X'&a[3][1]=='X') ||
					(a[0][2]=='X' & a[1][2]=='T'& a[2][2]=='X'&a[3][2]=='X') ||
					(a[0][3]=='X' & a[1][3]=='T'& a[2][3]=='X'&a[3][3]=='X') ||
					
					(a[0][0]=='X' & a[1][1]=='T'& a[2][2]=='X'&a[3][3]=='X') ||
					(a[0][3]=='X' & a[1][2]=='T'& a[2][1]=='X'&a[3][0]=='X') ||
					
					(a[0][0]=='T' & a[0][1]=='X'& a[0][2]=='X'&a[0][3]=='X') ||
					(a[1][0]=='T' & a[1][1]=='X'& a[1][2]=='X'&a[1][3]=='X') ||
					(a[2][0]=='T' & a[2][1]=='X'& a[2][2]=='X'&a[2][3]=='X') ||
					(a[3][0]=='T' & a[3][1]=='X'& a[3][2]=='X'&a[3][3]=='X') ||
					
					(a[0][0]=='T' & a[1][0]=='X'& a[2][0]=='X'&a[3][0]=='X') ||
					(a[0][1]=='T' & a[1][1]=='X'& a[2][1]=='X'&a[3][1]=='X') ||
					(a[0][2]=='T' & a[1][2]=='X'& a[2][2]=='X'&a[3][2]=='X') ||
					(a[0][3]=='T' & a[1][3]=='X'& a[2][3]=='X'&a[3][3]=='X') ||
					
					(a[0][0]=='T' & a[1][1]=='X'& a[2][2]=='X'&a[3][3]=='X') ||
					(a[0][3]=='T' & a[1][2]=='X'& a[2][1]=='X'&a[3][0]=='X')){
				result="X won";
				
			} else if(
					(a[0][0]=='O' & a[0][1]=='O'& a[0][2]=='O'&a[0][3]=='O') ||
					(a[1][0]=='O' & a[1][1]=='O'& a[1][2]=='O'&a[1][3]=='O') ||
					(a[2][0]=='O' & a[2][1]=='O'& a[2][2]=='O'&a[2][3]=='O') ||
					(a[3][0]=='O' & a[3][1]=='O'& a[3][2]=='O'&a[3][3]=='O') ||
					
					(a[0][0]=='O' & a[1][0]=='O'& a[2][0]=='O'&a[3][0]=='O') ||
					(a[0][1]=='O' & a[1][1]=='O'& a[2][1]=='O'&a[3][1]=='O') ||
					(a[0][2]=='O' & a[1][2]=='O'& a[2][2]=='O'&a[3][2]=='O') ||
					(a[0][3]=='O' & a[1][3]=='O'& a[2][3]=='O'&a[3][3]=='O') ||
					
					(a[0][0]=='O' & a[1][1]=='O'& a[2][2]=='O'&a[3][3]=='O') ||
					(a[0][3]=='O' & a[1][2]=='O'& a[2][1]=='O'&a[3][0]=='O') ||
					
					(a[0][0]=='O' & a[0][1]=='O'& a[0][2]=='O'&a[0][3]=='T') ||
					(a[1][0]=='O' & a[1][1]=='O'& a[1][2]=='O'&a[1][3]=='T') ||
					(a[2][0]=='O' & a[2][1]=='O'& a[2][2]=='O'&a[2][3]=='T') ||
					(a[3][0]=='O' & a[3][1]=='O'& a[3][2]=='O'&a[3][3]=='T') ||
					
					(a[0][0]=='O' & a[1][0]=='O'& a[2][0]=='O'&a[3][0]=='T') ||
					(a[0][1]=='O' & a[1][1]=='O'& a[2][1]=='O'&a[3][1]=='T') ||
					(a[0][2]=='O' & a[1][2]=='O'& a[2][2]=='O'&a[3][2]=='T') ||
					(a[0][3]=='O' & a[1][3]=='O'& a[2][3]=='O'&a[3][3]=='T') ||
					
					(a[0][0]=='O' & a[1][1]=='O'& a[2][2]=='O'&a[3][3]=='T') ||
					(a[0][3]=='O' & a[1][2]=='O'& a[2][1]=='O'&a[3][0]=='T') ||
					
					(a[0][0]=='O' & a[0][1]=='O'& a[0][2]=='T'&a[0][3]=='O') ||
					(a[1][0]=='O' & a[1][1]=='O'& a[1][2]=='T'&a[1][3]=='O') ||
					(a[2][0]=='O' & a[2][1]=='O'& a[2][2]=='T'&a[2][3]=='O') ||
					(a[3][0]=='O' & a[3][1]=='O'& a[3][2]=='T'&a[3][3]=='O') ||
					
					(a[0][0]=='O' & a[1][0]=='O'& a[2][0]=='T'&a[3][0]=='O') ||
					(a[0][1]=='O' & a[1][1]=='O'& a[2][1]=='T'&a[3][1]=='O') ||
					(a[0][2]=='O' & a[1][2]=='O'& a[2][2]=='T'&a[3][2]=='O') ||
					(a[0][3]=='O' & a[1][3]=='O'& a[2][3]=='T'&a[3][3]=='O') ||
		
					(a[0][0]=='O' & a[1][1]=='O'& a[2][2]=='T'&a[3][3]=='O') ||
					(a[0][3]=='O' & a[1][2]=='O'& a[2][1]=='T'&a[3][0]=='O') ||
					
					(a[0][0]=='O' & a[0][1]=='T'& a[0][2]=='O'&a[0][3]=='O') ||
					(a[1][0]=='O' & a[1][1]=='T'& a[1][2]=='O'&a[1][3]=='O') ||
					(a[2][0]=='O' & a[2][1]=='T'& a[2][2]=='O'&a[2][3]=='O') ||
					(a[3][0]=='O' & a[3][1]=='T'& a[3][2]=='O'&a[3][3]=='O') ||
					
					(a[0][0]=='O' & a[1][0]=='T'& a[2][0]=='O'&a[3][0]=='O') ||
					(a[0][1]=='O' & a[1][1]=='T'& a[2][1]=='O'&a[3][1]=='O') ||
					(a[0][2]=='O' & a[1][2]=='T'& a[2][2]=='O'&a[3][2]=='O') ||
					(a[0][3]=='O' & a[1][3]=='T'& a[2][3]=='O'&a[3][3]=='O') ||
				
					(a[0][0]=='O' & a[1][1]=='T'& a[2][2]=='O'&a[3][3]=='O') ||
					(a[0][3]=='O' & a[1][2]=='T'& a[2][1]=='O'&a[3][0]=='O') ||
					
					(a[0][0]=='T' & a[0][1]=='O'& a[0][2]=='O'&a[0][3]=='O') ||
					(a[1][0]=='T' & a[1][1]=='O'& a[1][2]=='O'&a[1][3]=='O') ||
					(a[2][0]=='T' & a[2][1]=='O'& a[2][2]=='O'&a[2][3]=='O') ||
					(a[3][0]=='T' & a[3][1]=='O'& a[3][2]=='O'&a[3][3]=='O') ||
				
					(a[0][0]=='T' & a[1][0]=='O'& a[2][0]=='O'&a[3][0]=='O') ||
					(a[0][1]=='T' & a[1][1]=='O'& a[2][1]=='O'&a[3][1]=='O') ||
					(a[0][2]=='T' & a[1][2]=='O'& a[2][2]=='O'&a[3][2]=='O') ||
					(a[0][3]=='T' & a[1][3]=='O'& a[2][3]=='O'&a[3][3]=='O') ||
				
					(a[0][0]=='T' & a[1][1]=='O'& a[2][2]=='O'&a[3][3]=='O') ||
					(a[0][3]=='T' & a[1][2]=='O'& a[2][1]=='O'&a[3][0]=='O')){
				result="O won";
			} else if(
					a[0][0]=='.' || a[0][1]=='.'||a[0][2]=='.'||a[0][3]=='.' ||
					a[1][0]=='.' || a[1][1]=='.'||a[1][2]=='.'||a[1][3]=='.' ||
					a[2][0]=='.' || a[2][1]=='.'||a[2][2]=='.'||a[2][3]=='.' ||
					a[3][0]=='.' || a[3][1]=='.'|| a[3][2]=='.'||a[3][3]=='.' ){
				result="Game has not completed";
			} else {
				result="Draw";
			}
			//System.out.println();
			System.out.println( "Case #"+(i+1)+": "+result);
			//System.out.println();
		}
		System.out.println();
//		String name="shradhdha";
//		int j= name.length();
//		char a[]=new char[j];	
//		for(int i=0;i<j;i++){
//			a[i]=name.charAt(i);
//			System.out.println(a[i] );
//		}
//			
	}

}
